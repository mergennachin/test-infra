# Week of 2025-05-26 to 2025-06-02 (28)

### GHFirst (4)

- [Revert "Remove MemPoolContext  (#154042)"](https://github.com/pytorch/pytorch/commit/d173ba5a7566a867677442c788a72c9bddaf7c99)
  - Diff reverted internally ([comment](https://github.com/pytorch/pytorch/pull/154042#issuecomment-2921401100))
- [Revert "[c10d] Separate monitoring thread into a class in PGNCCL (#153977)"](https://github.com/pytorch/pytorch/commit/852b99eba08c563c8c7e94ed81d13d9167280fa5)
  - breaks lots of jobs internally, safer to revert, see D75628917 ([comment](https://github.com/pytorch/pytorch/pull/153977#issuecomment-2921146129))
- [Revert "Fix the Problems About Defining Static Variable in Inline Function (#147095)"](https://github.com/pytorch/pytorch/commit/d4ab8e74f36f6be9b42ecd1bed24bdd6e8d9f05f)
  - still fails to link internally at meta ([comment](https://github.com/pytorch/pytorch/pull/147095#issuecomment-2917221575))
- [Revert "Remove outdated CUDA 11 conditions (#154313)"](https://github.com/pytorch/pytorch/commit/241f8dc84df2dd2e313eaef4314c2e37e34e0f76)
  - breaks internal builds ([comment](https://github.com/pytorch/pytorch/pull/154313#issuecomment-2914230005))

### Ignored Signal (1)

- [Revert "Aten vector default constructors set to 0, add fnmadd and fnmsub (#154298)"](https://github.com/pytorch/pytorch/commit/3e71016459f3469318294bc6f70c9985b241de1f)
  - breaks linux-jammy-aarch64-py3.10 / build ([comment](https://github.com/pytorch/pytorch/pull/154298#issuecomment-2923966688))

### No Signal (16)

- [Revert "Use 3.27 as the minimum CMake version (#153153)"](https://github.com/pytorch/pytorch/commit/bd10ea4e6cbabf463ddf64dd1d16b64f4400f42d)
  - It still breaks windows debug builds ([comment](https://github.com/pytorch/pytorch/pull/153153#issuecomment-2923997777))
- [Revert "Use 3.27 as the minimum CMake version (#153153)"](https://github.com/pytorch/pytorch/commit/108422ac2687a48b8d59bf5ef9aff77ed4244034)
  - It still breaks windows debug builds ([comment](https://github.com/pytorch/pytorch/pull/153153#issuecomment-2923785799))
- [Revert "[draft export] avoid storing intermediate real tensors in proxies (#154630)"](https://github.com/pytorch/pytorch/commit/0fab32290a46b3b3a66d018f20e1979acdd02e90)
  - This still ooms, at least occasionally see https://hud.pytorch.org/hud/pytorch/pytorch/78624679a876a21acb14bf075ba6beccff21b9a0/1?per_page=50&name_filter=pull%20%2F%20linux-focal-cuda12.6-py3.10-gcc11%20%2F%20test&mergeEphemeralLF=true ([comment](https://github.com/pytorch/pytorch/pull/154630#issuecomment-2923759745))
- [Revert "[internal] Expose additional metadata to compilation callbacks (#153596)"](https://github.com/pytorch/pytorch/commit/35fc5c49b477c43345ff249d2f99473e8303754c)
  - introduces bunch of callback-related failures on rocm ([comment](https://github.com/pytorch/pytorch/pull/153596#issuecomment-2923139061))
- [Revert "Use 3.27 as the minimum CMake version (#153153)"](https://github.com/pytorch/pytorch/commit/7e8532077f8c3d2b9ef098d7db8ddebe80912c3d)
  - It still breaks windows debug builds ([comment](https://github.com/pytorch/pytorch/pull/153153#issuecomment-2922369830))
- [Revert "Enable C++ dynamic shape guards by default (#140756)"](https://github.com/pytorch/pytorch/commit/ba51f4876d88bccf104da613ee2687201e230b47)
  - seem to break dynamo tests ([comment](https://github.com/pytorch/pytorch/pull/140756#issuecomment-2921151663))
- [Revert "Use 3.27 as the minimum CMake version (#153153)"](https://github.com/pytorch/pytorch/commit/53b0f6f5436e1c716e97d6094a708b66e2ce0f9f)
  - It broke windows debug builds, see https://hud.pytorch.org/hud/pytorch/pytorch/ef1d45b12d36f5c0e1699e872ea92284775cc3c3/1?per_page=50&name_filter=libtorch-debug&mergeEphemeralLF=true ([comment](https://github.com/pytorch/pytorch/pull/153153#issuecomment-2919897160))
- [Revert "[dynamo, nested graph breaks] small fixes to resume function generation (#151056)"](https://github.com/pytorch/pytorch/commit/a75e3a02be0f91e7f80e0b79e2446b7f56a4389b)
  - Not sure which one, but it broke test_error_messages, see https://hud.pytorch.org/hud/pytorch/pytorch/203b0efd6395a419330cf5700889afd420a89b2f/1?per_page=50&name_filter=py3.13-clang10&mergeEphemeralLF=true ([comment](https://github.com/pytorch/pytorch/pull/151056#issuecomment-2916437433))
- [Revert "[dynamo, nested graph breaks] refactor codegen to minimize NULL codegen'ing (#153510)"](https://github.com/pytorch/pytorch/commit/9603d6382d6c20fb4befe306782097ed23094cee)
  - Not sure which one, but it broke test_error_messages, see https://hud.pytorch.org/hud/pytorch/pytorch/203b0efd6395a419330cf5700889afd420a89b2f/1?per_page=50&name_filter=py3.13-clang10&mergeEphemeralLF=true ([comment](https://github.com/pytorch/pytorch/pull/151056#issuecomment-2916437433))
- [Revert "[dynamo, nested graph breaks] remove block stack graph break in output_graph (#153772)"](https://github.com/pytorch/pytorch/commit/5fd7004dc9a524b9675681768ce8bc8ee0480d0b)
  - Not sure which one, but it broke test_error_messages, see https://hud.pytorch.org/hud/pytorch/pytorch/203b0efd6395a419330cf5700889afd420a89b2f/1?per_page=50&name_filter=py3.13-clang10&mergeEphemeralLF=true ([comment](https://github.com/pytorch/pytorch/pull/151056#issuecomment-2916437433))
- [Revert "[dynamo, nested graph breaks] add skip_frame debugging function (#153773)"](https://github.com/pytorch/pytorch/commit/e86439ed5be3c5c32657033feeb09f8ca4f8966f)
  - Not sure which one, but it broke test_error_messages, see https://hud.pytorch.org/hud/pytorch/pytorch/203b0efd6395a419330cf5700889afd420a89b2f/1?per_page=50&name_filter=py3.13-clang10&mergeEphemeralLF=true ([comment](https://github.com/pytorch/pytorch/pull/151056#issuecomment-2916437433))
- [Revert "[Inductor] Improve typing, and prepare for ABI-compatible AOTI C-shim dispatching (#154371)"](https://github.com/pytorch/pytorch/commit/555fc05868032f117f82dd21acd1ce4f74bf5b16)
  - Appears to have broken main ([comment](https://github.com/pytorch/pytorch/pull/154371#issuecomment-2913975736))
- [Revert "Move inductor workflows focal (ubuntu 20.04) -> jammy (ubuntu 22.04) (#154153)"](https://github.com/pytorch/pytorch/commit/fa6ca59079c1312acbaed299b9886e867f015d62)
  - Broke inductor tests, see https://hud.pytorch.org/hud/pytorch/pytorch/b8452e55bc50109a14add60397fee6c85486ae8d/1?per_page=50&name_filter=inductor_torchbench&mergeEphemeralLF=true ([comment](https://github.com/pytorch/pytorch/pull/154153#issuecomment-2913738047))
- [Revert "[ROCm] Improve vectorized elementwise kernel performance in MI300X (#153634)"](https://github.com/pytorch/pytorch/commit/8c0f07f9449a4ee076a852f60a220aee4efd207d)
  - Broke inductor jobs, see https://hud.pytorch.org/hud/pytorch/pytorch/b8452e55bc50109a14add60397fee6c85486ae8d/1?per_page=50&name_filter=inductor%20%2F%20test&mergeEphemeralLF=true ([comment](https://github.com/pytorch/pytorch/pull/153634#issuecomment-2913619071))
- [Revert "introduce definitely_contiguous  and use it for reshape and tensor meta data computation.  (#153432)"](https://github.com/pytorch/pytorch/commit/11a51a11afb41dec3996a4d1fb94975a16e2e9dc)
  - Looks like it broke flex attention tests, see https://hud.pytorch.org/hud/pytorch/pytorch/main/1?per_page=50&name_filter=g6.4xlarge&mergeEphemeralLF=true ([comment](https://github.com/pytorch/pytorch/pull/153432#issuecomment-2912562570))
- [Revert "Re-enable FakeTensor caching for SymInts (#152662)"](https://github.com/pytorch/pytorch/commit/3f64502c98428df08841f7f31b06a408d52610e9)
  - Looks like it broke bunch of inductor tests, see https://hud.pytorch.org/hud/pytorch/pytorch/187d38185eb6b7e7db8bb00a7158ea3c5b0fe236/1?per_page=50&name_filter=inux-focal-cuda12.6-py3.10-gcc11-sm89&mergeEphemeralLF=true ([comment](https://github.com/pytorch/pytorch/pull/152662#issuecomment-2910293593))

### Weird (7)

- [Revert "convert inductor codecache to use getArtifactLogger (#153766)"](https://github.com/pytorch/pytorch/commit/1193bf085574f5f0836b6ca7d84e3c8cb1f2d0c3)
  - I want to revert this change as I'm 90+% certain it somehow broke testing ([comment](https://github.com/pytorch/pytorch/pull/153766#issuecomment-2923620806))
- [Revert "[Inductor] Add NaN assert to returned values from generated code (#154455)"](https://github.com/pytorch/pytorch/commit/fb67fa996808bac0a941bda7973e1c8aea1888ae)
  - Looks like it broke inductor/test_compile_subprocess.py::CpuTests::test_AllenaiLongformerBase, see https://hud.pytorch.org/hud/pytorch/pytorch/35fc5c49b477c43345ff249d2f99473e8303754c/1?per_page=50&name_filter=pull%20%2F%20linux-focal-py3.13-clang10%20%2F%20test%20(default%2C%20&mergeEphemeralLF=true ([comment](https://github.com/pytorch/pytorch/pull/154455#issuecomment-2923154249))
- [Revert "inductor codecache: include private inductor configs in cache key (#153672)"](https://github.com/pytorch/pytorch/commit/31f95b5d2e83278ce5f54bf53daba89bfcf7f35b)
  - Looks like it regressed pr_time_benchmarks, see https://hud.pytorch.org/hud/pytorch/pytorch/ba3f91af97c2453b72c4876c69b47ba62efc7e85/1?per_page=50&name_filter=pr_time_benchmarks&mergeEphemeralLF=true ([comment](https://github.com/pytorch/pytorch/pull/153672#issuecomment-2922759739))
- [Revert "[Inductor] Add NaN assert to returned values from generated code (#154455)"](https://github.com/pytorch/pytorch/commit/639f459cb6bf5cb208786171bdaa9a7b1ae1fc17)
  - Sorry for reverting your change, I am trying to see if it help fix the broken trunk below.  It it does not help, I will reland the PR ([comment](https://github.com/pytorch/pytorch/pull/154455#issuecomment-2921562089))
- [Revert "[AOTI] Support multi-arch when using package_cpp_only (#154414)"](https://github.com/pytorch/pytorch/commit/fdc339003b78eb4ce13c8e88597a89b199b6dcb7)
  - Sorry for reverting your change but it is failing ROCm trunk job ([comment](https://github.com/pytorch/pytorch/pull/154414#issuecomment-2915597821))
- [Revert "[executorch hash update] update the pinned executorch hash (#153436)"](https://github.com/pytorch/pytorch/commit/ef6306e1c6c934ef4d79f18b5808065c32964550)
  - Broke ET sanity ([comment](https://github.com/pytorch/pytorch/pull/153436#issuecomment-2911206795))
- [Revert "[executorch hash update] update the pinned executorch hash (#153436)"](https://github.com/pytorch/pytorch/commit/b643076e4e0bbeb51b1d5374d4567ff62b124740)
  - Broke ET sanity ([comment](https://github.com/pytorch/pytorch/pull/153436#issuecomment-2910692163))
