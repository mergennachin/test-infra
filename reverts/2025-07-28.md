# Week of 2025-07-28 to 2025-08-04 (28)

### GHFirst (13)

- [Revert "Fix rand_like decomposition to preserve strides (#159294)"](https://github.com/pytorch/pytorch/commit/c687446374e67d5fc9698dc21f65c23dffdbe094)
  - breaking internal test ([comment](https://github.com/pytorch/pytorch/pull/159294#issuecomment-3145541845))
- [Revert "Refactor CUDAAllocatorConfig to reuse AcceleratorAllocatorConfig (#150312)"](https://github.com/pytorch/pytorch/commit/5cc6a0abc131c09b7f87c57006bd118f3d073b13)
  - Static initialization order issue impact the downstream repo ([comment](https://github.com/pytorch/pytorch/pull/150312#issuecomment-3142035444))
- [Revert "Deprecate overleap functions in CUDAAllocatorConfig, use AcceleratorAllocatorConfig instead (#156165)"](https://github.com/pytorch/pytorch/commit/90f13f3b2a17658def505e959e8822aa7e321083)
  - Static initialization order issue impact the downstream repo ([comment](https://github.com/pytorch/pytorch/pull/150312#issuecomment-3142035444))
- [Revert "Generalize torch._C._set_allocator_settings to be generic (#156175)"](https://github.com/pytorch/pytorch/commit/cb9b74872b81f152684696f7c770573696f5756d)
  - Static initialization order issue impact the downstream repo ([comment](https://github.com/pytorch/pytorch/pull/150312#issuecomment-3142035444))
- [Revert "[dynamo] [guard] Add caching for inside torch.compile.disable function to avoid unnecessary recompilation. (#157566)"](https://github.com/pytorch/pytorch/commit/cb4f41e125a7981a54cad69944f04b7fcbe93746)
  - failed an odd internal test, please reach out to metamate to fix it, D79112610 ([comment](https://github.com/pytorch/pytorch/pull/157566#issuecomment-3141840110))
- [Revert "Fix ep deepcopy when there is python builitin name (#159478)"](https://github.com/pytorch/pytorch/commit/b1fb552974a9f54ceddd372229b6a759a274ea85)
  - Diff reverted internally ([comment](https://github.com/pytorch/pytorch/pull/159478#issuecomment-3141228423))
- [Revert "[ContextParallel][FlexAttention] Prototype of supporting FlexAttention in Context Parallel (#158692)"](https://github.com/pytorch/pytorch/commit/8a233d6000bd804546363b0ac1b73a5d0840c96b)
  - failed some internal testapf.metrics.tests.generate_graph_def_test.GenerateGraphDefTest: test_aps_generate_inference_graph_def_with_justknobs1) AssertionError: Expected 'check' to be called once. Called 3 times., please fix the internal test and reland it ([comment](https://github.com/pytorch/pytorch/pull/158692#issuecomment-3140873894))
- [Revert "fix strategy hashing arg mismatch (#159506)"](https://github.com/pytorch/pytorch/commit/c07bb277a0f82c9f082058868e6ff1b11e5bda81)
  - failed the internal tests test_get_bwd_hook (torch.equal(output * 2, input_tensor.grad)) ([comment](https://github.com/pytorch/pytorch/pull/159506#issuecomment-3140858905))
- [Revert "Fix rand_like decomposition to preserve strides (#159294)"](https://github.com/pytorch/pytorch/commit/7ac70ac4cd7a71a4c950e1fdff96a56a71c5475b)
  - failed internal build Failed to load config ([comment](https://github.com/pytorch/pytorch/pull/159294#issuecomment-3137796767))
- [Revert "Remove tensorexpr tests (#158928)"](https://github.com/pytorch/pytorch/commit/e288c258f7d388c2237d136c81514dd53586da0a)
  - this breaks bunch of internal dependency since some tests are still using the deleted test files from this pr, the internal reviewer please help fix this using codev ([comment](https://github.com/pytorch/pytorch/pull/158928#issuecomment-3134378616))
- [Revert "Partitioner: Fix to align partition node order with original graph (#157892)"](https://github.com/pytorch/pytorch/commit/c0c24b61ff4cc87b4640aa4e7596c020bea8b403)
  - fails internal tests : [executorch/backends/xnnpack/partition/xnnpack_partitioner.py:101:24] Incompatible parameter type [6]: In call `Partition.__init__`, for argument `nodes`, expected `Optional[Iterable[Tuple[Node, Optional[int]]]]` but got `dict_keys[Node, str]`. ([comment](https://github.com/pytorch/pytorch/pull/157892#issuecomment-3134004881))
- [Revert "[CI] update flake8 and mypy lint dependencies (#158720)"](https://github.com/pytorch/pytorch/commit/59e261bbd86b173b6cf318d392a613ca3efdbe10)
  - this pr failed internally when build torchgen due to rror: fail: Unknown PyPI project: pyyaml, it seems like this is caused by change PyYAML into  pyyaml, please fix it ([comment](https://github.com/pytorch/pytorch/pull/158720#issuecomment-3129995414))
- [Revert "[dynamo][fsdp] Consistent behavior of int attributes (#157262)"](https://github.com/pytorch/pytorch/commit/14d67eec05cbd461afb0a1161accc12d5515f010)
  - This was reverted internally. Somehow this PR didn't get reverted alongside it. See D78772867. To validate your fixes internally, you can follow the instructions here: https://fburl.com/fixing-ghfirst-reverts ([comment](https://github.com/pytorch/pytorch/pull/157262#issuecomment-3128148475))

### Ignored Signal (2)

- [Revert "[inductor] Add logging for distributed collective ops for multiâ€‘rank diagnostics (#159190)"](https://github.com/pytorch/pytorch/commit/490cb3f1a4bfb5366a6e2be1b095f3b3a2bf72ae)
  - broke dynamo/test_structured_trace [GH job link](https://github.com/pytorch/pytorch/actions/runs/16658705097/job/47150840171) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/bb62e1f769ef51e2ec149d7256c135d09425aaa0) on mac ([comment](https://github.com/pytorch/pytorch/pull/159190#issuecomment-3141513921))
- [Revert "Move Half to headeronly (#159172)"](https://github.com/pytorch/pytorch/commit/eaadd1282c8e66f37acf54f95668529831c95df7)
  - broke lint [GH job link](https://github.com/pytorch/pytorch/actions/runs/16613893793/job/47002486679) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/6d0f4566e2b6e05369d8bb6c0d0e83a0eee982aa).  Rebased then merged too quickly to see lint signal?  Sort of a landrace too then?  Note to self: why isn't Dr. CI updating? Probably b/c PR is closed ([comment](https://github.com/pytorch/pytorch/pull/159172#issuecomment-3136769493))

### Not through pytorchbot (2)

- [Back out "[ez] get rid of unused var" (#159677)](https://github.com/pytorch/pytorch/commit/79ff3b320be414f630f31639fc377ea29c28305e)
- [Revert direct updates (#159654)](https://github.com/pytorch/pytorch/commit/e4b123b5e4dd31a7888c8c0d311f7b0ace263e7f)

### No Signal (11)

- [Revert "[dynamo][guards] Make class members go through obj.__class__.__dict__ (#159534)"](https://github.com/pytorch/pytorch/commit/805a102beb9e9d349097258248dc57e44b951640)
  - Broke some inductor test and lint among other things, see https://hud.pytorch.org/hud/pytorch/pytorch/9c18901bfdc526a1df22866904ddcdb4d4ba5394/1?per_page=50&mergeEphemeralLF=true ([comment](https://github.com/pytorch/pytorch/pull/159534#issuecomment-3146983186))
- [Revert "[dynamo] Be consistent with storing func source for UserMethodVariable (#159696)"](https://github.com/pytorch/pytorch/commit/6e8d705a22a496467679c7da8cc60dfb519f9cc5)
  - Broke some inductor test and lint among other things, see https://hud.pytorch.org/hud/pytorch/pytorch/9c18901bfdc526a1df22866904ddcdb4d4ba5394/1?per_page=50&mergeEphemeralLF=true ([comment](https://github.com/pytorch/pytorch/pull/159534#issuecomment-3146983186))
- [Revert "[inductor] consolidate common GEMM triton param retrieval (#159383)"](https://github.com/pytorch/pytorch/commit/acad8085457235367048ad6c1a2abfde81974db5)
  - sorry but rocm CI is broken due to this PR ([comment](https://github.com/pytorch/pytorch/pull/159383#issuecomment-3145604831))
- [Revert "Fix large_tensor_test skipping cpu (#158617)"](https://github.com/pytorch/pytorch/commit/3e5e0946152ca3500c0491927c26724f7f8ac244)
  - Sorry but this seems to be breaking trunk. See [GH job link](https://github.com/pytorch/pytorch/actions/runs/16631113381/job/47062415099) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/debc0591b888f211bfe846bdc7cfa0626a5f6f6a) ([comment](https://github.com/pytorch/pytorch/pull/158617#issuecomment-3138387762))
- [Revert "Fix max_width computation in _tensor_str._Formatter (#126859)"](https://github.com/pytorch/pytorch/commit/6c6e11c206b28e9c73019a166a0536a8f47b9acf)
  - broke trunk with test  distributed/test_c10d_functional_native.py::CompileTest::test_inductor_all_reduce_single - RuntimeError: Expected to find buf7 = empty but did not find it ([comment](https://github.com/pytorch/pytorch/pull/126859#issuecomment-3137137030))
- [Revert "[Dynamo][Better Engineering] Add typing annotations to guard and source (#158397)"](https://github.com/pytorch/pytorch/commit/d987a6f7f0057283bbfa99850b883370c3c34c13)
  - Suggested to fix failing internal signals on D78911890 ([comment](https://github.com/pytorch/pytorch/pull/158397#issuecomment-3133823766))
- [Revert "[HOP, map] Rework of map autograd to the new interface (#153343)"](https://github.com/pytorch/pytorch/commit/5d93127c87fbd867dbce9051c713d4a118588fca)
  - a older pr this pr dependes on needed to revert, rebase it after it's in ([comment](https://github.com/pytorch/pytorch/pull/153343#issuecomment-3133816812))
- [Revert "[inductor] Fix mm decomposition evaluating symints (#158998)"](https://github.com/pytorch/pytorch/commit/e557b3d5e5fa31a2cfed779e00cc0accf44e1115)
  - it broke trunk with pr_time_benchmark test  ([comment](https://github.com/pytorch/pytorch/pull/158998#issuecomment-3133696775))
- [Revert "[CPU] fix _weight_int8pack_mm with large output shape (#158341)"](https://github.com/pytorch/pytorch/commit/61aa2ae20ff71226e2052e99adcd7cbeee3010c5)
  - Breaks slowtest ([comment](https://github.com/pytorch/pytorch/pull/158341#issuecomment-3132641530))
- [Revert "Setup TorchBench in Docker (#158613)"](https://github.com/pytorch/pytorch/commit/d26ab281d2910af524d94b89bf0220de92606662)
  - checkout_install_torchbench function is removed but still referenced in trunk ([comment](https://github.com/pytorch/pytorch/pull/158613#issuecomment-3125695250))
- [Revert "[Profiler] Fix lost C call events problem in Python 3.12.0-3.12.4 (#155446)"](https://github.com/pytorch/pytorch/commit/1cffb217ef521f6fb1d25b7a45085622eada5c2d)
  - Breaks Windows wheels ([comment](https://github.com/pytorch/pytorch/pull/155446#issuecomment-3125566269))
