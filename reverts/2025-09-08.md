# Week of 2025-09-08 to 2025-09-15 (40)

### GHFirst (15)

- [Revert "[Reland] Use std::string_view in torchgen (#158625)"](https://github.com/pytorch/pytorch/commit/deb7ebe0a399b982ee48001713320a0bac792261)
  - Sorry for reverting your change but it seems to break a couple of ExecuTorch tests for Vulkan backend ([comment](https://github.com/pytorch/pytorch/pull/158625#issuecomment-3287754275))
- [Revert "Return NoOpDeviceGuardImpl in replace of CudaDeviceGuard when device is not available, or cpu-only build (#160532)"](https://github.com/pytorch/pytorch/commit/9c93dc8123005c75494a4c3cd46532a75820da70)
  - Reverted internally ([comment](https://github.com/pytorch/pytorch/pull/160532#issuecomment-3287745165))
- [Revert "port some distributed tensor test files for Intel GPU (#161703)"](https://github.com/pytorch/pytorch/commit/31040b6357e2e6d3d3ff5de08ddd7cecf28766cc)
  - Sorry for reverting your change but these tests are failing internally ([comment](https://github.com/pytorch/pytorch/pull/161703#issuecomment-3287720713))
- [Revert "[MTIA Runtime] Add foreach_div ops to native_functions.yaml (#162732)"](https://github.com/pytorch/pytorch/commit/cdfa298a3b32df6cfd09348755f4202148830b78)
  - Reverted internally ([comment](https://github.com/pytorch/pytorch/pull/162732#issuecomment-3287163750))
- [Revert "[RELAND] Always build USE_DISTRIBUTED (#160449) and Make distributed modules importable even when backend not built (#159889) (#162594)"](https://github.com/pytorch/pytorch/commit/6b59a19242e0862563bfe6b595f7db3ef44ade7f)
  - Reverted internally ([comment](https://github.com/pytorch/pytorch/pull/162594#issuecomment-3283985880))
- [Revert "[2/N]Port several test files under test/distributed to Intel GPU (#159473)"](https://github.com/pytorch/pytorch/commit/92f9ed7ac37be57ec883e1cca798654b5b581607)
  - Sorry for reverting your change but it seems to break an distributed tests ([comment](https://github.com/pytorch/pytorch/pull/159473#issuecomment-3282999084))
- [Revert "[nn] Assert parsed iterable arguments are an appropriate length (#162340)"](https://github.com/pytorch/pytorch/commit/468c1f9e9d9259afeca0248c5e8f4b0e7fb113bf)
  - Sorry for reverting your change but it seems to break an MPS tests on ExecuTorch ([comment](https://github.com/pytorch/pytorch/pull/162340#issuecomment-3282676242))
- [Revert "[inductor] FlexibleLayout for ExternKernelChoice for mms (#161351)"](https://github.com/pytorch/pytorch/commit/1c6dfbe5578cdd4e49c67e0c777c36aa9295d7b1)
  - Check with @coconutruben and the internal failures look real ([comment](https://github.com/pytorch/pytorch/pull/161351#issuecomment-3282511692))
- [Revert "[inductor] leverage template stacking in V.choices.get_mm_configs (#161350)"](https://github.com/pytorch/pytorch/commit/934f87888380ff828c03139c0435ebe27a18d76d)
  - Check with @coconutruben and the internal failures look real ([comment](https://github.com/pytorch/pytorch/pull/161351#issuecomment-3282511692))
- [Revert "[inductor][choices] rename get_mm_configs to get_template_configs (#162293)"](https://github.com/pytorch/pytorch/commit/cef05b1202bb26929917aeaabae94de430fdb8fe)
  - Check with @coconutruben and the internal failures look real ([comment](https://github.com/pytorch/pytorch/pull/161351#issuecomment-3282511692))
- [Revert "Make functorch notebook symlinks PEP 517 valid (#157813)"](https://github.com/pytorch/pytorch/commit/053251b98da69bacb916c9910c0c77f09ed3fe07)
  - Sorry for reverting your change, but this surfaces a weird discrepancy between GitHub and Mecurial used internally ([comment](https://github.com/pytorch/pytorch/pull/157813#issuecomment-3276442242))
- [Revert "[ROCm] Integrate AITER Fav3 fwd kernels (#160105)"](https://github.com/pytorch/pytorch/commit/96ef26f71aeb386cd1ac591cb50ba98a9c417f18)
  - Sorry for reverting your change but it is failing internal ROCm build ([comment](https://github.com/pytorch/pytorch/pull/160105#issuecomment-3273297183))
- [Revert "[ROCm] Add specific compile options for CK SDPA (#161759)"](https://github.com/pytorch/pytorch/commit/2281d009e5efd7650481243faab116cd78281da3)
  - Sorry for reverting your change but this seems to break internal ROCm jobs ([comment](https://github.com/pytorch/pytorch/pull/161759#issuecomment-3272807726))
- [Revert "Always build USE_DISTRIBUTED. (#160449)"](https://github.com/pytorch/pytorch/commit/1e0656f063ce100c2a934bd9a31b99d45b68353a)
  - internal changes breaks import checks, see [D81845053](https://www.internalfb.com/diff/D81845053) ([comment](https://github.com/pytorch/pytorch/pull/160449#issuecomment-3264887002))
- [Revert "Make distributed modules importable even when backend not built (#159889)"](https://github.com/pytorch/pytorch/commit/29e09a65450626e35b90b40d05e2b65aa0757006)
  - internal changes breaks import checks, see [D81845053](https://www.internalfb.com/diff/D81845053) ([comment](https://github.com/pytorch/pytorch/pull/160449#issuecomment-3264887002))

### Ignored Signal (2)

- [Revert "[torch][c10d] fix split_group in mixed backend case (#162424)"](https://github.com/pytorch/pytorch/commit/d033d11d26b321471bc7b5186d1e21a3084a0963)
  - failure seems related, maybe a hang/timeout distributed/test_distributed_spawn.py::TestDistBackendWithSpawn::test_ddp_model_diff_shape_across_ranks log classifier is pointing at the wrong line ([comment](https://github.com/pytorch/pytorch/pull/162424#issuecomment-3276360494))
- [Revert "[MPS] mps sparse mul op implementation (#162349)"](https://github.com/pytorch/pytorch/commit/82f1eb9b031374b6d523a47f94cc9b35cff76f20)
  - Fails trunk tests, with uint8 sum ([comment](https://github.com/pytorch/pytorch/pull/162349#issuecomment-3271783442))

### Not through pytorchbot (1)

- [Revert "Make distributed modules importable even when backend not built (#159889)" (#162568)](https://github.com/pytorch/pytorch/commit/dda071587f0522a16b237f92cbe27fd13a1a1c11)

### No Signal (18)

- [Revert "[ROCm/Windows] Support aotriton for scaled_dot_product_attention on Windows. (#162330)"](https://github.com/pytorch/pytorch/commit/5b9114bf197d1db32cc1cfe06f66e2b4a02f55b1)
  - Sorry reverting looks like broke windows nightlies see https://github.com/pytorch/pytorch/issues/162881 ([comment](https://github.com/pytorch/pytorch/pull/162330#issuecomment-3288544921))
- [Revert "python fastpath for DTensor detach(), confirm that aliasing DTensorSpec is ok (#160580)"](https://github.com/pytorch/pytorch/commit/7dd5f7b1256169595c3fc7afc2598437189a7507)
  - this broke shampoo, yanking ([comment](https://github.com/pytorch/pytorch/pull/160580#issuecomment-3287372891))
- [Revert "[DeviceMesh] Make CuTe layout as mesh layout to be ready for using in DeviceMesh (#162414)"](https://github.com/pytorch/pytorch/commit/b5f4a7dc141471f6b6c3c012b4a6f468f91834f4)
  - Looks like it broke test_circular_deps on Windows, see https://hud.pytorch.org/hud/pytorch/pytorch/d89189f28999af6b037c5939edf57836d141ff0e/1?per_page=50&name_filter=win-vs2022-cpu ([comment](https://github.com/pytorch/pytorch/pull/162414#issuecomment-3286070938))
- [Revert "[indexing] Prevent integer overflow from large step values in C++ (#161707)"](https://github.com/pytorch/pytorch/commit/00e9ba75cde155b049e740012b86b02bdfca9aa4)
  - Look like there is a land race as lots of jobs are failing after this lands ([comment](https://github.com/pytorch/pytorch/pull/161707#issuecomment-3283980465))
- [Revert "Move prioritized text linker optimization code from setup.py to cmake (#160078)"](https://github.com/pytorch/pytorch/commit/94db2ad51d44f203cdb9df124712b3f0a2837f43)
  - Sorry reverting this broke linux aarch64 CUDA nightlies [pytorch/pytorch/actions/runs/17637486681/job/50146967503](https://github.com/pytorch/pytorch/actions/runs/17637486681/job/50146967503) ([comment](https://github.com/pytorch/pytorch/pull/160078#issuecomment-3281426631))
- [Revert "Build and Install Arm Compute Library in manylinux docker image (#159737)"](https://github.com/pytorch/pytorch/commit/9f783e172d7fadc8ddfbcc6fd4b1adabb74934e0)
  - Sorry reverting this broke linux aarch64 CUDA nightlies [pytorch/pytorch/actions/runs/17637486681/job/50146967503](https://github.com/pytorch/pytorch/actions/runs/17637486681/job/50146967503) ([comment](https://github.com/pytorch/pytorch/pull/159737#issuecomment-3281398272))
- [Revert "Move inductor jobs 3.9->3.10 (#162323)"](https://github.com/pytorch/pytorch/commit/23170dfebcd79751531e4202b472f3ae98bad388)
  - Not sure what had happened, but some inductor unit tests start failing after this lands ([comment](https://github.com/pytorch/pytorch/pull/162323#issuecomment-3278125192))
- [Revert "Fix decorators skipping NCCL tests  (#158846)"](https://github.com/pytorch/pytorch/commit/40ea6e418a324ef8ca34e85176dec1a496621f11)
  - Sorry for reverting your change but it is failing some inductor tests ([comment](https://github.com/pytorch/pytorch/pull/158846#issuecomment-3276471387))
- [Revert "Fix DCE eliminating in-place operations by improving Node.is_impure() (#162267)"](https://github.com/pytorch/pytorch/commit/fc1b09a52ab995559b7825240031ad66c1ba0166)
  - Not sure how it happened, but looks like it broke everything, see https://hud.pytorch.org/hud/pytorch/pytorch/c2388201fc85b0748173212de5a17514c7a71f21/1?per_page=50 ([comment](https://github.com/pytorch/pytorch/pull/162267#issuecomment-3275164109))
- [Revert "test fixing benchmarks (#162503)"](https://github.com/pytorch/pytorch/commit/e1f0a6994391d4be7ebb60b3b46b9bdcfc0aa906)
  - Sorry for reverting your change but it regresses CPU perf smoke test ([comment](https://github.com/pytorch/pytorch/pull/162503#issuecomment-3273554680))
- [Revert "[dynamo] Graph break on on user-defined class in compiled region (#161670)"](https://github.com/pytorch/pytorch/commit/a3e26d1727461a5b8f44065ce5b0dbdfd5541e64)
  - Sorry for reverting your change but it is failing a trunk test ([comment](https://github.com/pytorch/pytorch/pull/161670#issuecomment-3272626391))
- [Revert "Use same NVSHMEM version across CUDA builds (#162206)"](https://github.com/pytorch/pytorch/commit/5ccf3ca3ec8d2fd5e4816129a51825ef9a154a44)
  - Broke lint, see https://hud.pytorch.org/hud/pytorch/pytorch/4dd73e659a8fd4872e5f49cfd72e420fa7c4e6c9/1?per_page=50&name_filter=workflow-checks ([comment](https://github.com/pytorch/pytorch/pull/162206#issuecomment-3271040521))
- [Revert "fix torch.sparse.log_softmax on CPU (#161959)"](https://github.com/pytorch/pytorch/commit/4dd73e659a8fd4872e5f49cfd72e420fa7c4e6c9)
  - test failure: test_sparse.py::TestSparseMPS::test_log_softmax_float_mps_float32 [GH job link](https://github.com/pytorch/pytorch/actions/runs/17573794461/job/49915138287) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/002e59440afe8711019e68df500f5e18b9a43f3c) ([comment](https://github.com/pytorch/pytorch/pull/161959#issuecomment-3270509418))
- [Revert "testing infra and some fixes (#162183)"](https://github.com/pytorch/pytorch/commit/60d009267e5e24d9210d3015810ef008c0234310)
  - Failing a test on macos ([comment](https://github.com/pytorch/pytorch/pull/162183#issuecomment-3268922096))
- [Revert "[dynamo] Constant fold torch.autograd._profiler_enabled (#158482)"](https://github.com/pytorch/pytorch/commit/ed77e23b6808065c927e626f471d5bf588dd2cc2)
  - NCCL hangs in S560336 ([comment](https://github.com/pytorch/pytorch/pull/158482#issuecomment-3268426781))
- [Revert "[associative_scan] Autograd separated (#139939)"](https://github.com/pytorch/pytorch/commit/5d819f3fafe68ad6fdc133c58b5f5591a34c2d9f)
  - Sorry for reverting your change but I am seeing a weird failure after this lands in trunk ([comment](https://github.com/pytorch/pytorch/pull/139939#issuecomment-3267945657))
- [Revert "Use vectorized stores for all dtypes in cat (#161649)"](https://github.com/pytorch/pytorch/commit/a92773eeb1f8e8274dd5ebc75b2b65912cc4b625)
  - reverted internally ([comment](https://github.com/pytorch/pytorch/pull/161649#issuecomment-3266963044))
- [Revert "[audio hash update] update the pinned audio hash (#162315)"](https://github.com/pytorch/pytorch/commit/53297f6ad08c79347cb4dfc14685c9e6de848900)
  - Reverting in order to see if this introduced the failure https://github.com/pytorch/pytorch/actions/runs/17539536914/job/49810513700 ([comment](https://github.com/pytorch/pytorch/pull/162315#issuecomment-3266932718))

### Weird (4)

- [Revert "AMD CPU CI - Add freezing + fix label trigger (#162176)"](https://github.com/pytorch/pytorch/commit/222ec8d28ecd46a2c3ecfc660937ec640275c167)
  - Sorry for reverting this but hardcoding the input online 122 does not make sense ([comment](https://github.com/pytorch/pytorch/pull/162176#issuecomment-3283532452))
- [Revert "Put torchao (0.13.0) back to benchmark workflow (#162227)"](https://github.com/pytorch/pytorch/commit/80d4da893cf08d7ee6e6cfe0024d1d5202a0c5a6)
  - Crashing some inductor jobs in trunk ([comment](https://github.com/pytorch/pytorch/pull/162227#issuecomment-3276355034))
- [Revert "Add BundledAOTAutogradSerializableCallable (#162170)"](https://github.com/pytorch/pytorch/commit/1641606aa4d0eac4ec5422903bb101d590a32abc)
  - This PR has a merge conflict with D81793200 on aot_compile.py where PRs and diffs are landed in reverted order ([comment](https://github.com/pytorch/pytorch/pull/162170#issuecomment-3268735428))
- [Revert "Modify ROCm MI2xx-based workflows to run on cron schedule (#162103)"](https://github.com/pytorch/pytorch/commit/dd44faa9d91e34fdf611a4b994da0aa73e4b1f9b)
  - Cirrascale network outage resolved. Reverting back to running per commit to aid in triage and CI health ([comment](https://github.com/pytorch/pytorch/pull/162103#issuecomment-3267977825))
