# Week of 2025-09-29 to 2025-10-06 (39)

### GHFirst (22)

- [Revert "[BE] Make PyObjectSlot use a global PyInterpreter (#162659)"](https://github.com/pytorch/pytorch/commit/331191ce4b29b5d7d3bb7f0e7454ca70c06fbd26)
  - reverted internally, see [D83214133](https://www.internalfb.com/diff/D83214133) ([comment](https://github.com/pytorch/pytorch/pull/162659#issuecomment-3369348172))
- [Revert "[2/N] Fix clang-tidy readability checks  (#164652)"](https://github.com/pytorch/pytorch/commit/2c5ed6e7c067573b093725cd15d13812d9647562)
  - need to revert due to a conflict with revert of https://github.com/pytorch/pytorch/pull/162659 ([comment](https://github.com/pytorch/pytorch/pull/164652#issuecomment-3369346707))
- [Revert "Add device argument to torch.random.get_rng_state (#163034)"](https://github.com/pytorch/pytorch/commit/2e1742dd63c2168fd9649dbba96a95abf1f57cae)
  - It cased partially initialised torch module ([comment](https://github.com/pytorch/pytorch/pull/163034#issuecomment-3368349209))
- [Revert "Add pure view support in autograd Function (#164467)"](https://github.com/pytorch/pytorch/commit/f46bb04dcc37a9b394e414569aef8aef69f9bf53)
  - Diff reverted internally ([comment](https://github.com/pytorch/pytorch/pull/164467#issuecomment-3368152304))
- [Revert "Make custom op alias check consistent (#164576)"](https://github.com/pytorch/pytorch/commit/6f6a91936660b3d2d00ab8cc0018f5cfae815dab)
  - Diff reverted internally ([comment](https://github.com/pytorch/pytorch/pull/164467#issuecomment-3368152304))
- [Revert "Support setting grad_dtype on leaf tensors (#162815)"](https://github.com/pytorch/pytorch/commit/3ddf2018d0b7b4def0553dc092d928ef831a19c3)
  - break internal test D83850533, see more details below ([comment](https://github.com/pytorch/pytorch/pull/162815#issuecomment-3367498501))
- [Revert "[inductor] require shape in TritonCSEVariable (#162275)"](https://github.com/pytorch/pytorch/commit/0b4f2b46d9e14c1858dd3d0ca9b62e349ae316cf)
  - break interal test, see more details in next comment ([comment](https://github.com/pytorch/pytorch/pull/162275#issuecomment-3367213941))
- [Revert "[DeviceMesh] Simplifying internal bookkeeping with CuTe layout (#163213)"](https://github.com/pytorch/pytorch/commit/22e219d9969ff3cee85bc5de32fa49d5a549a148)
  - caused internal test failure ([comment](https://github.com/pytorch/pytorch/pull/163213#issuecomment-3363414435))
- [Revert "Speed up FP precision lookup (#164044)"](https://github.com/pytorch/pytorch/commit/2a7c48675010056f23d62b5c6ecb318782801723)
  - broke internal build In file included from xplat/caffe2/aten/src/ATen/DeviceAccelerator.cpp:1: xplat/caffe2/aten/src/ATen/Context.h:502:38: error: shift count >= width of type [-Werror,-Wshift-count-overflow] 502 | return std::hash<size_t>{}((k1 << 32) | k2); ([comment](https://github.com/pytorch/pytorch/pull/164044#issuecomment-3363016702))
- [Revert "Use TMA loads always for Triton grouped MM kernel (#164256)"](https://github.com/pytorch/pytorch/commit/6bb021c12553755a4f64df0b60dc34b1efdb992b)
  -  failed internal test: (pytorch.tritonbench.test.test_gpu.main.TestTritonbenchGpu) Error Details: torch._inductor.exc.InductorError: LoweringException: NoValidChoicesError: No choices to select. Provided reason: All choices failed to compile for backend. please consider adding ATEN into max_autotune_gemm_backends config (defined in torch/_inductor/config.py) to allow at least one choice.  ([comment](https://github.com/pytorch/pytorch/pull/164256#issuecomment-3362359624))
- [Revert "Stop parsing command line arguments every time common_utils is imported. (#156703)"](https://github.com/pytorch/pytorch/commit/39189592fd688979e56063430ed5a038d999908f)
  - failing internally D80206253, see above comment for details ([comment](https://github.com/pytorch/pytorch/pull/156703#issuecomment-3362156908))
- [Revert "Improve repeat op to a single copy (#163842)"](https://github.com/pytorch/pytorch/commit/7cfecd76b2141d81c90d722dc5e3262bdf7ea900)
  - internal test failed: RuntimeError: false INTERNAL ASSERT FAILED at aten/src/ATen/quantized/Quantizer.cpp:441, . cannot call qscheme on UnknownQuantizer please reach out folks who have internal access for furthur debugging. ([comment](https://github.com/pytorch/pytorch/pull/163842#issuecomment-3361746041))
- [Revert "[DCP] Decrease checkpoint background process Gloo pg init timeout (#162760)"](https://github.com/pytorch/pytorch/commit/a10207e61bed268bc34604944a19266199df7ae8)
  - Diff reverted internally ([comment](https://github.com/pytorch/pytorch/pull/162760#issuecomment-3358630631))
- [Revert "Add num_store to inductor_meta and use it to scale persistent reduction x block (#162446)"](https://github.com/pytorch/pytorch/commit/20edc5b26a1a196fbe6250f0e914d7061991a092)
  - perf regression in https://github.com/pytorch/pytorch/issues/164301#issuecomment-3354028620 ([comment](https://github.com/pytorch/pytorch/pull/162446#issuecomment-3357164274))
- [Revert "[fx] Allow customization of submod name in split graph (#164035)"](https://github.com/pytorch/pytorch/commit/59a86cb137d26526ebbe7a586b3e5a79d115aa08)
  - internal build failed Buck build failed for this target, and is likely caused by your changes. ([comment](https://github.com/pytorch/pytorch/pull/164035#issuecomment-3357113348))
- [Revert "[PP] Customize pipeline's submod name (#164037)"](https://github.com/pytorch/pytorch/commit/36a37b81cdfd4199d72f1096d295ee1378237547)
  - internal build failed Buck build failed for this target, and is likely caused by your changes. ([comment](https://github.com/pytorch/pytorch/pull/164035#issuecomment-3357113348))
- [Revert "CUDACachingHostAllocatorImpl skip event query during capture (#164001)"](https://github.com/pytorch/pytorch/commit/07d896fa487e5732b122121985342f762339b95e)
  - failed internal error with multiple errors found: Not equal to tolerance rtol=0.1, atol=0.1.. ([comment](https://github.com/pytorch/pytorch/pull/164001#issuecomment-3356894787))
- [Revert "[BE] Remove HermeticPyObjectTLS and Simplify PythonOpRegistrationTrampoline (#163464)"](https://github.com/pytorch/pytorch/commit/cc5d74c366e8e106097489d05ec062ddcd279d38)
  - Diff reverted internally ([comment](https://github.com/pytorch/pytorch/pull/163464#issuecomment-3353307034))
- [Revert "Consistently use c10_ovrsource in arvr mode everywhere (#164128)"](https://github.com/pytorch/pytorch/commit/0fb89b84b9254dbec04f89c05e4ec8d725b03890)
  - Diff reverted internally ([comment](https://github.com/pytorch/pytorch/pull/164128#issuecomment-3352544006))
- [Revert "Enable outer reductions in fbcode (#163884)"](https://github.com/pytorch/pytorch/commit/ca19815e3cb512db834f6f5d0466ed3c6ffcff23)
  - Diff reverted internally ([comment](https://github.com/pytorch/pytorch/pull/163884#issuecomment-3349822031))
- [Revert "[export] Skip the check instead of disable (#164084)"](https://github.com/pytorch/pytorch/commit/9e792f583afae92ec8ddedac1660bd79991d1f4f)
  - broke internal tests ([comment](https://github.com/pytorch/pytorch/pull/164084#issuecomment-3348862668))
- [Revert "[dynamo] Special path for cloning of torch dispatch tensors (#164081)"](https://github.com/pytorch/pytorch/commit/6650f5af74cea75a35ee360e12f968cc657848ef)
  - broke internal tests ([comment](https://github.com/pytorch/pytorch/pull/164084#issuecomment-3348862668))

### Not through pytorchbot (3)

- [Revert nccl upgrade back to 2.27.5 (#164352)](https://github.com/pytorch/pytorch/commit/26107463751bede32a488507c4fb553ec8859d9d)
- [Revert new-test part of #163829 (#164259)](https://github.com/pytorch/pytorch/commit/8df3f2fa9840a287c203645b9851d9d3abdfd819)
- [Back out "Revert D81959389" (#163905)](https://github.com/pytorch/pytorch/commit/7afcb030d8e0ad00c43722e77de0f3729e7290f3)

### No Signal (12)

- [Revert "Enable all SIM rules except disabled ones (#164645)"](https://github.com/pytorch/pytorch/commit/5d7360bb03355c89c0b956df0ab428f5a7b5c9f8)
  - causes lint failures ([comment](https://github.com/pytorch/pytorch/pull/164645#issuecomment-3369274351))
- [Revert "[CUDA] Add experimental green context support for SM carveout (#159104)"](https://github.com/pytorch/pytorch/commit/8ec8c14aced9f3e7ff4ab663822bed792d6c34f4)
  - failed lint, pyfmt not caught pyi file, I think they need special handling since theyre not in the changed files list? [GH job link](https://github.com/pytorch/pytorch/actions/runs/18231232848/job/51914868027) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/3c59351c6ea2fc29d346903e28e95c5f4d0ccdbb) ([comment](https://github.com/pytorch/pytorch/pull/159104#issuecomment-3367077208))
- [Revert "Add provenance to inductor IR nodes created after graph.run (#164255)"](https://github.com/pytorch/pytorch/commit/a34797e031727f6a01a2f13a66db2f7e1fcc05b6)
  - broke rocm; inductor/test_provenance_tracing.py::TestProvenanceTracingStackTraces::test_deferred_triton_kernels [GH job link](https://github.com/pytorch/pytorch/actions/runs/18200790301/job/51821738132) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/b9e73e639e36f3aa628752161711e68878231b30) ([comment](https://github.com/pytorch/pytorch/pull/164255#issuecomment-3363360088))
- [Revert "C++-accessible Placements via pybind11 (#163030)"](https://github.com/pytorch/pytorch/commit/f6f76767563d4293a0f78551edf4675a5794c570)
  - doesn't pass pyre ([comment](https://github.com/pytorch/pytorch/pull/163030#issuecomment-3362450379))
- [Revert "[vision hash update] update the pinned vision hash (#154694)"](https://github.com/pytorch/pytorch/commit/0319556a35b01e8857f7bf75df9df3287e1e853a)
  - break the unittest for inductor with improved, update benchmarks/dynamo/ci_expected_accuracy/inductor_torchbench_inference.csv, see failure example https://github.com/pytorch/pytorch/actions/runs/18185852421/job/51776537817 ([comment](https://github.com/pytorch/pytorch/pull/154694#issuecomment-3362285901))
- [Revert "Add magic TORCH_MAKE_PYBIND_ENUM_FASTER macro (#163527)"](https://github.com/pytorch/pytorch/commit/c6329524d8670d5f9295cddcf7ebc3040ed9179e)
  - breaking import torch in debug builds, see #164297 ([comment](https://github.com/pytorch/pytorch/pull/163527#issuecomment-3361919142))
- [Revert "[dynamo, 3.14] fix _detect_and_normalize_assert_statement for 3.14 (#164005)"](https://github.com/pytorch/pytorch/commit/69c5c08a015a286cd4a4390a8e178a8e5d3d761c)
  - broke some tests e.g. https://github.com/meta-pytorch/autoparallel/actions/runs/18167350261/job/51719783636?pr=179 ([comment](https://github.com/pytorch/pytorch/pull/164005#issuecomment-3357433475))
- [Revert "Add functions to setup PrivateUse1 as a python backend device. (#157859)"](https://github.com/pytorch/pytorch/commit/410ed3006b096753f388b42fd532d7b0e94524fa)
  - introduce linting errors https://github.com/pytorch/pytorch/actions/runs/18123993236/job/51574878473 ([comment](https://github.com/pytorch/pytorch/pull/157859#issuecomment-3352140098))
- [Revert "[inductor] do comm compute overlap at aten fx level (#163215)"](https://github.com/pytorch/pytorch/commit/0f619c1f893fa475296470ecbb73ccecb353fb55)
  - seems fails inductor/test_aten_comm_compute_reordering for macos test, see https://hud.pytorch.org/pytorch/pytorch/commit/c9b5af9a384e7ef5f95613abe1622f5f55133c3a#51526707590-box ([comment](https://github.com/pytorch/pytorch/pull/163215#issuecomment-3349177940))
- [Revert "refactor bucketing (#163754)"](https://github.com/pytorch/pytorch/commit/b28e4f1f874d7bb3d9c85cb23f4baf1f71c71e89)
  - seems fails inductor/test_aten_comm_compute_reordering for macos test, see https://hud.pytorch.org/pytorch/pytorch/commit/c9b5af9a384e7ef5f95613abe1622f5f55133c3a#51526707590-box ([comment](https://github.com/pytorch/pytorch/pull/163215#issuecomment-3349177940))
- [Revert "Helper to augment graph with additional deps (#163959)"](https://github.com/pytorch/pytorch/commit/84dc54ae5e8203905f13e6ea47573658a4504ec6)
  - seems fails inductor/test_aten_comm_compute_reordering for macos test, see https://hud.pytorch.org/pytorch/pytorch/commit/c9b5af9a384e7ef5f95613abe1622f5f55133c3a#51526707590-box ([comment](https://github.com/pytorch/pytorch/pull/163215#issuecomment-3349177940))
- [Revert "[inductor] require shape in TritonCSEVariable (#162275)"](https://github.com/pytorch/pytorch/commit/6b473c90cfc911abe59e1b001f99f6bc079daad7)
  - sorry this broke rocm CI; inductor/test_select_algorithm.py::TestTemplateRender::test_finalized_subclass_hooks [GH job link](https://github.com/pytorch/pytorch/actions/runs/18048893250/job/51366715091) [HUD commit link](https://hud.pytorch.org/pytorch/pytorch/commit/c257570e6cd25753f9f0a640b965148ead2cf918) ([comment](https://github.com/pytorch/pytorch/pull/162275#issuecomment-3348159095))

### Weird (2)

- [Revert "[CI] Push `viable/strict/${time}` tags (#164183)"](https://github.com/pytorch/pytorch/commit/79fcfd49d6610a859bff0a2017599b1886e5af34)
  - Hmm, didn't work that way ([comment](https://github.com/pytorch/pytorch/pull/164183#issuecomment-3352494098))
- [Revert "Add less warps config to inner reductions (#162447)"](https://github.com/pytorch/pytorch/commit/71b4fada576cfcb9a4c6502adf1c00b2f959d81a)
  - internal failure ([comment](https://github.com/pytorch/pytorch/pull/162447#issuecomment-3352474768))
